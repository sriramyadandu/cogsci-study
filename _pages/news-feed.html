---
title: "In The Know"
layout: default
pagination:
enabled: true
description: "A great Jekyll theme developed by Sal @wowthemesnet."
permalink: "/news-feed.html"
---


<div class="container-fluid" style="padding-left: 12rem; padding-right: 12rem;">


    <!-- Begin post excerpts, let's highlight the first 4 posts on top -->
    <h4 class="font-weight-bold spanborder"><span>Featured</span></h4>
    <div id="featured-posts" class="row remove-site-content-margin">

        <script type="application/javascript">

function isGroupB() {
  const params = new URLSearchParams(window.location.search);
  return params.get("group") === "B";
}

            
            const allFeatured = [
                {% for post in site.data.all %}
                    {
                    title: {{ post.title | jsonify }},
                    url: {{ post.url | jsonify }},
                    image: {{ post.image | jsonify }},
                    excerpt: {{ post.excerpt | strip_html | strip_newlines | jsonify }},
                    categories: {{ post.categories | jsonify }},
                    date: {{ post.date | date: "%b %d, %Y" | jsonify }},
                    tags: {{ post.tags | jsonify | default: "[]" }}
                    }{% unless forloop.last %},{% endunless %}
                {% endfor %}
            ];


            function getTopicStancePairs() {
                const params = new URLSearchParams(window.location.search);
                const pairs = [];

                // Check for known topics in query string
                ["vaccination", "affirmaction", "immigration"].forEach(topic => {
                    const stance = params.get(topic);
                    if (stance) {
                        pairs.push({ topic, stance });
                    }
                });

                return pairs;
            }

            function matchesPair(post, topic, stance) {
                const cats = post.categories.map(c => c.toLowerCase());
                return cats.includes(topic.toLowerCase()) && cats.includes(stance.toLowerCase());
            }

           function renderFeatured(posts) {
  const container = document.getElementById("featured-posts");
  container.innerHTML = "";

  if (posts.length === 0) {
    container.innerHTML = `<p>No featured articles match the selected criteria.</p>`;
    return;
  }

  const leftPost = posts[0];
  const rightPosts = posts.slice(1, 3); // Up to 2

  // Left Column (Large Feature)
  const leftCol = document.createElement("div");
  leftCol.className = "col-md-6";
  leftCol.innerHTML = `
    <div class="card border-0 mb-4 box-shadow">
      <a href="${leftPost.url}">
        <div class="topfirstimage" style="background-image: url(${leftPost.image}); height: 200px; background-size: cover; background-repeat: no-repeat;"></div>
      </a>
      <div class="card-body px-0 pb-0 d-flex flex-column align-items-start">
        <h2 class="h4 font-weight-bold">
          <a class="text-dark" href="${leftPost.url}">${leftPost.title}</a>
        </h2>
        <p class="excerpt">${leftPost.excerpt.slice(0, 136)}...</p>
        <div>
          <small class="d-block text-muted">
            <span class="catlist">${isGroupB() ? `${leftPost.date}` : ''}</span>
          </small>
        </div>
      </div>
    </div>
  `;
  container.appendChild(leftCol);

  // Right Column (Stacked Features)
  const rightCol = document.createElement("div");
  rightCol.className = "col-md-6";

  rightPosts.forEach(post => {
    const postBlock = document.createElement("div");
    postBlock.className = "mb-3 d-flex align-items-center";

    postBlock.innerHTML = `
      <div class="col-md-4">
        <a href="${post.url}">
          <img class="w-100" src="${post.image}" alt="${post.title}">
        </a>
      </div>
      <div>
        <h2 class="mb-2 h6 font-weight-bold">
          <a class="text-dark" href="${post.url}">${post.title}</a>
        </h2>
        <p class="excerpt small">${post.excerpt.slice(0, 100)}...</p>

        <small class="d-block text-muted">
            <span class="catlist">${isGroupB() ? `${post.date}` : ''}</span>
        </small>
      </div>
    `;

    rightCol.appendChild(postBlock);
  });

  container.appendChild(rightCol);
}


            const topicStancePairs = getTopicStancePairs();

            const filteredPosts = allFeatured.filter(post =>
                topicStancePairs.some(({ topic, stance }) => matchesPair(post, topic, stance))
            );

            renderFeatured(filteredPosts);
        </script>

    </div>






    <!-- Now the rest of the posts with the usual loop but with an offset:4 on the first page so we can skeep the first 4 posts displayed above -->

    <div class="row mt-3">


        <div class="col-md-6 main-loop">
            <h4 class="font-weight-bold spanborder"><span>All Stories</span></h4>
            <div id="all-posts"></div>
        </div>


        <script>
            const allPosts = [
                {% for post in site.data.all %}
                    {
                    title: {{ post.title | jsonify }},
                    url: {{ post.url | jsonify }},
                    image: {{ post.image | jsonify }},
                    excerpt: {{ post.excerpt | strip_html | strip_newlines | jsonify }},
                    categories: {{ post.categories | jsonify }},
                    date: {{ post.date | date: "%b %d, %Y" | jsonify }},
                    tags: {{ post.tags | jsonify | default: "[]" }}
                    }{% unless forloop.last %},{% endunless %}
                {% endfor %}
            ];

            const params = new URLSearchParams(window.location.search);
  const group = params.get("group");

  function renderAllPosts(posts, group) {
    const container = document.getElementById("all-posts");
    container.innerHTML = "";


    posts.forEach(post => {
      const postHTML = `
        <div class="mb-5 d-flex justify-content-between main-loop-card">
          <div class="pr-3">
            <h2 class="mb-1 h4 font-weight-bold">
              <a class="text-dark" href="${post.url}" target="_blank" rel="noopener">${post.title}</a>
            </h2>
            <p class="excerpt small-text">${post.excerpt.slice(0, 186)}...</p>
            ${group === "B" ? `<small class="text-muted">${post.date}</small>` : ``}
          </div>
          ${post.image ? `
            <div class="col-md-3 pr-0 text-right">
              <a href="${post.url}" target="_blank" rel="noopener">
                <img class="w-100" src="${post.image}" alt="${post.title}">
              </a>
            </div>
          ` : ``}
        </div>
      `;
      container.insertAdjacentHTML("beforeend", postHTML);
    });
  }

  renderAllPosts(allPosts, group);
        </script>
        <!-- Left side sticky form -->
        <div class="col-md-6">
            <div class="position-sticky" style="top: 100px;">
                <div class="card p-3 shadow-sm">
                    <h5 class="font-weight-bold mb-3">INSTRUCTIONS: PLEASE READ FIRST</h5>
                    <iframe
                        src="https://docs.google.com/forms/d/e/1FAIpQLScgy6hDMx4XkdYMRyi0CH2_tbKEyrOSCFpQt_NYPB7yUvMSCQ/viewform?usp=header"
                        width="100%" height="600" frameborder="0" marginheight="0" marginwidth="0">Loadingâ€¦</iframe>
                </div>
            </div>
        </div>
    </div>



</div>